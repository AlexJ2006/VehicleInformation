//Trying to call the main function to show the version history

//Welcoming the user
//Getting their log-in selection
insertBreak();
    Console.WriteLine("WELCOME to CRS");
    insertBreak();
    Console.WriteLine("Please select one of the following choices:");
    insertBreak();
    Console.WriteLine("G) for GUEST");
    insertBreak();
    Console.WriteLine("S) for STAFF");
    insertBreak();
    Console.WriteLine("C) to CREATE an ACCOUNT");
    insertBreak();
    Console.WriteLine("L) to LOG IN to an EXISTING ACCOUNT");
    insertBreak();
    Console.Write("ENTER YOUR CHOICE: ");
    string userSelection = Console.ReadLine()!;

//If the user is a NEW USER (ACCOUNT CREATION IN THE FUTURE)
if (userSelection == "C" || userSelection == "c")
{
    Console.WriteLine("WELCOME NEW USER");
    //Insert NEW USER functions here
}

//If the user has chosen to use the system as a GUEST.
else if (userSelection == "G" || userSelection == "g")
{
    //Insert GUEST functions here
    insertBreak();
    Console.Write("Please enter your NAME: ");
    string guestName = Console.ReadLine()!;
    insertBreak();
    Console.WriteLine($"Welcome, {guestName}!");
    insertBreak();
    Console.WriteLine("Please choose from ONE of the following options:");
    insertBreak();
    Console.Write("C for CAR, M for MOTORCYCLE, V for VAN: ");
    string vehicleType = Console.ReadLine()!;

    //Cars
    if (vehicleType == "C" || vehicleType == "c")
    {
        LoadCars();
        insertBreak();
        Console.WriteLine("You have chosen CAR");
        insertBreak();

        Console.WriteLine("Which category of CAR would you like to rent?");
        insertBreak();
        Console.Write("The options are SMALL, MEDIUM or LARGE: ");
        string categoryChoice = Console.ReadLine()!;
        insertBreak();
        Console.WriteLine($"You have chosen {categoryChoice}");
        insertBreak();

        Console.Write("What is your maximum Price Per Day?: ");
        string maxPriceString = Console.ReadLine()!;
        int maxPriceInt = Convert.ToInt32(maxPriceString);
        Console.WriteLine("The options meeting your criteria are: ");
        // TRYING TO GET THIS TO WORK TO PRESENT THE USER WITH MULTIPLE PIECES OF INFORMATION
        insertBreak();
        //I HAVE REMOVED IENUMERABLE, WILL THIS STILL WORK?
        var carList =
        CarData.carDict
        .Where(car =>
            car.Value.pricePerDay <= maxPriceInt &&
            car.Value.category.Equals(categoryChoice, StringComparison.OrdinalIgnoreCase))
        .Select(car => new { car.Value.make, car.Value.model, car.Value.pricePerDay });

        foreach (var Car in carList)
        {
            Console.WriteLine($"{Car.make} - {Car.model} - £{Car.pricePerDay}/day");
            insertBreak();
        }

        Console.WriteLine("Please fill out the following fields for the CAR you wish to RENT");
        insertBreak();
        Console.Write("MAKE: ");
        string userCarMakeSelection = Console.ReadLine()!;
        insertBreak();
        Console.Write("MODEL: ");
        string userCarModelSelection = Console.ReadLine()!;
        insertBreak();
        Console.Write("How many days would you like to rent the CAR for?: ");
        string stringNumberOfDaysRental = Console.ReadLine()!;
        int numberOfDaysRental = Convert.ToInt32(stringNumberOfDaysRental);
        insertBreak();

        Console.WriteLine($"You would like to rent the {userCarMakeSelection} {userCarModelSelection}");
        insertBreak();
        Console.WriteLine($"For {numberOfDaysRental} days?");
        Console.Write("Press Y to CONTINUE: ");
        string continueWithRental = Console.ReadLine()!;
        insertBreak();

        if (continueWithRental == "Y" || continueWithRental == "y")
        {
            var userCarSelection = CarData.carDict.Values.FirstOrDefault(Car =>
            Car.make.Equals(userCarMakeSelection, StringComparison.OrdinalIgnoreCase) &&
            Car.model.Equals(userCarModelSelection, StringComparison.OrdinalIgnoreCase));


            if (userCarSelection != null)
            {
                int totalPrice = userCarSelection.pricePerDay * numberOfDaysRental;
                Console.WriteLine($"Your total will be £{totalPrice}");

                removeCar(userCarMakeSelection, userCarModelSelection);
                Console.WriteLine($"Thank you, you have rented the {userCarMakeSelection} {userCarModelSelection} for {numberOfDaysRental} days, costing £{totalPrice}");
            }
            else
            {
                Console.WriteLine("CAR NOT FOUND.");
            }
        }
        else if (continueWithRental == "N" || continueWithRental == "n")
        {
            Console.WriteLine("Thank you.");
            Console.WriteLine("The program will now TERMINATE.");
            return;
        }
        else
        {
            invalidInputDuringRental();
        }

        // CAR REMOVAL FUNCTION
    }
    //Motorbikes
    else if (vehicleType == "M" || vehicleType == "m")
    {
        LoadMotorbikes();

        insertBreak();
        Console.Write("What is your maximum Price Per Day?: ");
        string maxPriceString = Console.ReadLine()!;
        int maxPriceInt = Convert.ToInt32(maxPriceString);
        insertBreak();
        Console.WriteLine("Your Options are: ");
        insertBreak();

        var motorbikeList =
            MotorbikeData.motorbikeDict
                .Where(motorbike =>
                (motorbike.Value.pricePerDay <= maxPriceInt))
                .Select(motorbike => new { motorbike.Value.make, motorbike.Value.model, motorbike.Value.pricePerDay });
        foreach (var motorbike in motorbikeList)
        {
            Console.WriteLine($"{motorbike.make} - {motorbike.model} - £{motorbike.pricePerDay}/day");
            insertBreak();
        }
        Console.WriteLine("Please fill out the following fields for the MOTORBIKE you wish to RENT");
        insertBreak();
        Console.Write("MAKE: ");
        string userMotorbikeMakeSelection = Console.ReadLine()!;
        insertBreak();
        Console.Write("MODEL: ");
        string userMotorbikeModelSelection = Console.ReadLine()!;
        insertBreak();
        Console.Write("How many days would you like to rent the MOTORBIKE for?: ");
        string stringNumberOfDaysRental = Console.ReadLine()!;
        int numberOfDaysRental = Convert.ToInt32(stringNumberOfDaysRental);
        insertBreak();

        Console.WriteLine($"You would like to rent the {userMotorbikeMakeSelection} {userMotorbikeModelSelection}");
        insertBreak();
        Console.WriteLine($"For {numberOfDaysRental} days?");
        Console.Write("Press Y to CONTINUE: ");
        string continueWithRental = Console.ReadLine()!;
        insertBreak();

        if (continueWithRental == "Y" || continueWithRental == "y")
        {
            var userMotorbikeSelection = MotorbikeData.motorbikeDict.Values.FirstOrDefault(Motorbike =>
            Motorbike.make.Equals(userMotorbikeMakeSelection, StringComparison.OrdinalIgnoreCase) &&
            Motorbike.model.Equals(userMotorbikeModelSelection, StringComparison.OrdinalIgnoreCase));

            if (userMotorbikeSelection != null)
            {
                int totalPrice = userMotorbikeSelection.pricePerDay * numberOfDaysRental;
                Console.WriteLine($"Your total will be £{totalPrice}");

                removeMotorbike(userMotorbikeMakeSelection, userMotorbikeModelSelection);
                Console.WriteLine($"Thank you, you have rented the {userMotorbikeMakeSelection} {userMotorbikeModelSelection} for {numberOfDaysRental} days, costing £{totalPrice}");
            }
            else
            {
                Console.WriteLine("MOTORBIKE NOT FOUND.");
            }
        }
    }
    //Vans
    else if (vehicleType == "V" || vehicleType == "v")
    {
        LoadVans();

        insertBreak();
        Console.WriteLine("Which category of VAN would you like to rent?");
        insertBreak();
        Console.Write("The options are SMALL, MEDIUM or LARGE: ");
        string categoryChoice = Console.ReadLine()!;
        insertBreak();
        Console.WriteLine($"You have chosen {categoryChoice}");
        insertBreak();

        Console.Write("What is your maximum Price Per Day?: ");
        string maxVanPriceString = Console.ReadLine()!;
        int maxVanPriceInt = Convert.ToInt32(maxVanPriceString);
        insertBreak();
        Console.WriteLine("Your Options are: ");

        insertBreak();

        var vanList =
            VanData.vanDict
                .Where(van =>
                (van.Value.pricePerDay <= maxVanPriceInt))
                .Select(van => new { van.Value.make, van.Value.model, van.Value.pricePerDay });

        foreach (var van in vanList)
        {
            Console.WriteLine($"{van.make} - {van.model} - £{van.pricePerDay}/day");
            insertBreak();
        }
        Console.WriteLine("Please fill out the following fields for the VAN you wish to RENT");
        insertBreak();
        Console.Write("MAKE: ");
        string userVanMakeSelection = Console.ReadLine()!;
        insertBreak();
        Console.Write("MODEL: ");
        string userVanModelSelection = Console.ReadLine()!;
        insertBreak();
        Console.Write("How many days would you like to rent the VAN for?: ");
        string stringNumberOfDaysVanRental = Console.ReadLine()!;
        int numberOfDaysVanRental = Convert.ToInt32(stringNumberOfDaysVanRental);
        insertBreak();

        Console.WriteLine($"You would like to rent the {userVanMakeSelection} {userVanModelSelection}");
        Console.WriteLine($"For {numberOfDaysVanRental} days?");
        insertBreak();
        Console.Write("Press Y to CONTINUE: ");
        string continueWithVanRental = Console.ReadLine()!;
        insertBreak();

        if (continueWithVanRental == "Y" || continueWithVanRental == "y")
        {
            var userVanSelection = VanData.vanDict.Values.FirstOrDefault(Van =>
            Van.make.Equals(userVanMakeSelection, StringComparison.OrdinalIgnoreCase) &&
            Van.model.Equals(userVanModelSelection, StringComparison.OrdinalIgnoreCase));

            if (userVanSelection != null)
            {
                int totalPrice = userVanSelection.pricePerDay * numberOfDaysVanRental;
                Console.WriteLine($"Your total will be £{totalPrice}");

                removeVan(userVanMakeSelection, userVanModelSelection);
                Console.WriteLine($"Thank you, you have rented the {userVanMakeSelection} {userVanModelSelection} for {numberOfDaysVanRental} days, costing £{totalPrice}");
            }
            else
            {
                Console.WriteLine("VAN NOT FOUND");
            }
        }
        //If the user has not inputted C, M or V...
        else
        {
            invalidInput();
        }
    }
}
//If the user wishes to sign in as a member of STAFF
else if (userSelection == "S" || userSelection == "s")
{
    //Insert STAFF functions here
    insertBreak();
    Console.WriteLine("WELCOME STAFF");
    insertBreak();
    Console.WriteLine("Which of the following functions would you like to perform?");
    insertBreak();
    Console.WriteLine("A) ADD VEHICLES");
    insertBreak();
    Console.WriteLine("R) REMOVE VEHICLES");
    insertBreak();
    Console.WriteLine("E) EDIT STORE LIST");
    insertBreak();
    Console.Write("Please Enter Your Choice: ");
    string? staffMenuChoice = Console.ReadLine();
    insertBreak();

    if (staffMenuChoice == "A" || staffMenuChoice == "a")
    {
        Console.WriteLine("Would you like to add");
        insertBreak();
        Console.WriteLine("C) CAR");
        insertBreak();
        Console.WriteLine("M) MOTORBIKE");
        insertBreak();
        Console.WriteLine("OR");
        insertBreak();
        Console.WriteLine("V) VAN");
        insertBreak();
        Console.Write("PLEASE ENTER YOUR CHOICE: ");
        string addVehicleType = Console.ReadLine()!;
        insertBreak();

        if (addVehicleType == "C" || addVehicleType == "c")
        {
            Console.Write("Would you like to ADD MULTIPLE CARS?: ");
            string addMultipleCars = Console.ReadLine()!;
            insertBreak();

            if (addMultipleCars == "Yes" || addMultipleCars == "yes" || addMultipleCars == "Y" || addMultipleCars == "y")
            {
                Console.Write("How many cars would you like to add?: ");
                string stringHowManyCars = Console.ReadLine()!;
                int intHowManyCars = Convert.ToInt32(stringHowManyCars);
                insertBreak();

                while (intHowManyCars > 0)
                {
                    intHowManyCars--;
                    addCar();

                }
            }
            else
            {
                addCar();
            }
        }
        else if (addVehicleType == "M" || addVehicleType == "m")
        {
            Console.Write("Would you like to ADD MULTIPLE MOTORBIKES?: ");
            string addMultipleMotorbikes = Console.ReadLine()!;

            if (addMultipleMotorbikes == "Yes" || addMultipleMotorbikes == "yes" || addMultipleMotorbikes == "Y" || addMultipleMotorbikes == "y")
            {
                Console.Write("How many motorbikes would you like to add?: ");
                string stringHowManyMotorbikes = Console.ReadLine()!;
                int intHowManyMotorbikes = Convert.ToInt32(stringHowManyMotorbikes);

                while (intHowManyMotorbikes > 0)
                {
                    intHowManyMotorbikes--;
                    addMotorbike();
                }
            }
            else
            {
                //One instance of the Add Motorbike class occurs rather than multiple
                insertBreak();
                addMotorbike();
            }
        }
        else if (addVehicleType == "V" || addVehicleType == "v")
        {
            Console.Write("Would you like to ADD MULTIPLE VANS?: ");
            string addMultipleVans = Console.ReadLine()!;

            if (addMultipleVans == "Yes" || addMultipleVans == "yes" || addMultipleVans == "Y" || addMultipleVans == "y")
            {
                Console.Write("How many vans would you like to add?: ");
                string stringHowManyVans = Console.ReadLine()!;
                int intHowManyVans = Convert.ToInt32(stringHowManyVans);

                while (intHowManyVans > 0)
                {
                    intHowManyVans--;
                    addVan();
                }
            }
            else
            {
                insertBreak();
                addVan();
            }
        }
        else
        {
            //Provide Error Message
            invalidInput();
            Console.WriteLine("WRONG SECTION");
        }
    }
    else if (staffMenuChoice == "R" || staffMenuChoice == "r")
    {
        //Remove Vehicle from list section
    }
    else if (staffMenuChoice == "E" || staffMenuChoice == "e")
    {
        Console.WriteLine("The current list of stores will be displayed below: ");
        insertBreak();

        storeListDisplay();

        insertBreak();
        Console.Write("Would you like to Add a new store to the list?: ");
        string decision = Console.ReadLine()!;
        if (decision == "Yes" || decision == "yes")
        {
            storeAdd();
            Console.WriteLine("Would you like to add another store?: ");
            string addMoreStores = Console.ReadLine()!;

            if (addMoreStores == "Yes" || addMoreStores == "yes")
            {
                storeAdd();
            }
            else
            {
                Console.WriteLine("You will now be logged out, THANK YOU.");
                return;
            }
        }
        else if (decision == "No" || decision == "no")
        {
            Console.WriteLine("Would you like to remove a store from the list?: ");
            string removeStore = Console.ReadLine()!;

            if (removeStore == "Yes" || removeStore == "yes")
            {
                Console.WriteLine("Please enter the name of the store you wish to remove from the list");
                Console.WriteLine("OR");
                Console.WriteLine("Press V to view the list");
                Console.Write("Enter Your Choice: ");
                string choice = Console.ReadLine()!;

                if (choice == "V" || choice == "v")
                {
                    storeListDisplay();
                }
                else
                {
                    invalidInput();
                }
            }
        }
        else
        {
            //Provide Error Message
            invalidInput();
            Console.WriteLine("WRONG SECTION");
        }
    }
}
else if (userSelection == "L" || userSelection == "l")
{
    LogIn();
}
